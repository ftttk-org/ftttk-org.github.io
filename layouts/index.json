{{- $.Scratch.Add "index" slice -}}
{{- range site.RegularPages -}}
    {{- if and (not .Params.searchHidden) (ne .Layout `archives`) (ne .Layout `search`) -}}
        {{- $categories := .Params.categories | default slice -}}
        {{- $tags := .Params.tags | default slice -}}
        {{- $.Scratch.Add "index" (dict 
            "Title" .Title 
            "content" .Plain 
            "RelPermalink" .RelPermalink 
            "permalink" .Permalink 
            "Summary" .Summary
            "Params" (dict 
                "categories" $categories
                "tags" $tags
            )
        ) -}}
    {{- end -}}
{{- end -}}
{{- $.Scratch.Get "index" | jsonify -}}

